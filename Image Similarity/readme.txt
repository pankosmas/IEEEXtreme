There are two black-and-white images. You want to determine how similar the two images are by matching their black pixels. Each image has a grid of unit-sized square pixels. You can manipulate the images in the following three ways:

Rotate one image by 90 degrees clockwise or counterclockwise;
Translate an image horizontally or vertically in either direction;
Flip an image horizontally or vertically.
The similarity between two images is defined as the maximum number of black pixels that can overlap if you manipulate the images using an arbitrary number of the three types of operations above. After all operations, the pixels of the images must be aligned to the unit grid.

Your task is to determine the similarity for a given pair of images.
